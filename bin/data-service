#!/usr/bin/env node
var program = require('gitlike-cli');

function listUsers() {
  var run = require('./list-users.js');
  run();
}

function listSensors(args) {
  var run = require('./list-sensors.js');
  run(args.userUID);
}

function listDatastreams(args) {
  var run = require('./list-datastreams.js');
  run(args.userUID, args.sensorUID);
}

function listRecords(args) {
  var run = require('./list-records.js');
  run(args.datastreamUID);
}

function showUser(args) {
  var run = require('./show-user.js');
  run(args.uid);
}

function showSensor(args) {
  var run = require('./show-sensor.js');
  run(args.userUID, args.sensorUID);
}

function showDatastream(args) {
  var run = require('./show-datastream.js');
  run(args.userUID, args.sensorUID, args.datastreamUID);
}

program
  .command('list')
    .command('users')
      .description("List all users")
      .action(listUsers)
      .parent
    .command('sensors <userUID>')
      .description("List sensors for a user")
      .action(listSensors)
      .parent
    .command('datastreams <userUID> <sensorUID>')
      .description("List datastreams for a sensor")
      .action(listDatastreams)
      .parent
    .command('records <datastreamUID>')
      .description("List records for a datastream")
      .action(listRecords)
      .parent
    .parent

  .command('show')
    .command('user <UID>')
      .description("Show a user")
      .action(showUser)
      .parent
    .command('sensor <userUID> <sensorUID>')
      .description("Show a sensor")
      .action(showSensor)
      .parent
    .command('datastream <userUID> <sensorUID> <datastreamUID>')
      .description("Show a datastream")
      .action(showDatastream)
      .parent
    .parent
  .parse(process.argv);

